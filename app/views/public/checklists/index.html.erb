<div class="container">
  <div class="text-success">
    <% if flash[:notice] %>
       <p id="notice text-success">
         <%= flash[:notice] %>
       </p>
    <% end %>
  </div>

  <div class="row" style="margin-top:2rem">
    <div class="col-8 offset-2">
      <%= form_with url: update_checklist_manage_camp_path(@camp), local: true, method: :patch do |f| %>
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="site-tab"
            data-bs-toggle="tab"
            data-bs-target="#site"
            type="button"
            role="tab"
            aria-controls="site"
            aria-selected="true"
          >
            サイト
          </button>
        </li>
       <li class="nav-item" role="presentation">
         <button
           class="nav-link"
           id="cook-tab"
           data-bs-toggle="tab"
           data-bs-target="#cook"
           type="button"
           role="tab"
           aria-controls="cook"
           aria-selected="false"
         >
           料理
         </button>
       </li>
       <li class="nav-item" role="presentation">
         <button
           class="nav-link"
           id="tent-tab"
           data-bs-toggle="tab"
           data-bs-target="#tent"
           type="button"
           role="tab"
           aria-controls="tent"
           aria-selected="false"
         >
           テント泊
         </button>
       </li>
       <li class="nav-item" role="presentation">
         <button
           class="nav-link"
           id="bonfire-tab"
           data-bs-toggle="tab"
           data-bs-target="#bonfire"
           type="button"
           role="tab"
           aria-controls="bonfire"
           aria-selected="false"
         >
           焚き火
         </button>
       </li>
       <li class="nav-item" role="presentation">
         <button
           class="nav-link"
           id="others-tab"
           data-bs-toggle="tab"
           data-bs-target="#others"
           type="button"
           role="tab"
           aria-controls="others"
           aria-selected="false"
         >
           その他
         </button>
       </li>
       <%= f.submit '作成' %>
      </ul>

      <%#= form_with model: @checklist_manage, url: checklist_manage_path(@checklist_manage.id), local: true, method: :PATCH do |f| %>
      <div class="tab-content" id="myTabContent">
        <%# @camp.checklists.group_by { |c| c.category.category_name }.each do |key, values| %>
        <div
          class="tab-pane fade show active"
          id="site"
          role="tabpanel"
          aria-labelledby="site-tab"
        >
          <table class="table">
            <%# check_boxから変更 %>
            <%= f.collection_check_boxes :site_categories ,@checklists.site_category , :id, :checklist_name do |checklist| %>
              <tbody>
                <tr>
                  <td><%= checklist.check_box %></td>
                  <td><%= checklist.object.checklist_name %></td>
                  <td><%= checklist.object.comment %></td>
                </tr>
              </tbody>
            <% end %>
            <%#= checklist.comment %>
            <%# @checklists.site_category.each do |checklist| %>
              <!--<tbody>
                <tr>
                  <th><%#= checklist.check_box (@checklist_manage.is_active, {:checked => false}, checked_value = "true", unchecked_value = "false") %></th>
                  <%# <th><%= check_box "creates" , checklist.id %></th>
                  <td><%#= checklist.checklist_name %></td>
                  <td><%#= checklist.comment %></td>
                </tr>
              </tbody>
            <%# end %>-->
          </table>


        </div>
        <%# end %>
        <div
          class="tab-pane fade"
          id="cook"
          role="tabpanel"
          aria-labelledby="cook-tab"
        >
          <table class="table">
            <%= f.collection_check_boxes :cook_categories ,@checklists.cook_category , :id, :checklist_name do |checklist| %>
             <%# @camp.checklists.cook_category.each do |checklist| %>
              <tbody>
                <tr>
                  <td><%= checklist.check_box %></td>
                  <td><%= checklist.object.checklist_name %></td>
                  <td><%= checklist.object.comment %></td>
                </tr>
              </tbody>
            <% end %>
          </table>


        </div>
        <div
          class="tab-pane fade"
          id="tent"
          role="tabpanel"
          aria-labelledby="tent-tab"
        >
          <table class="table">
            <%= f.collection_check_boxes :tent_categories ,@checklists.tent_category , :id, :checklist_name do |checklist| %>
              <tbody>
                <tr>
                  <td><%= checklist.check_box %></td>
                  <td><%= checklist.object.checklist_name %></td>
                  <td><%= checklist.object.comment %></td>
                </tr>
              </tbody>
              <%# @checklists.tent_category.each do |checklist| %>
                <!--<tbody>
                  <tr>
                    <td><%#= checklist.checklist_name %></td>
                    <td><%#= checklist.comment %></td>
                  </tr>
                </tbody>
              <%# end %>-->
            <% end %>
          </table>
        </div>

        <div
          class="tab-pane fade"
          id="bonfire"
          role="tabpanel"
          aria-labelledby="bonfire-tab"
        >
          <table class="table">
            <%= f.collection_check_boxes :bonfire_categories ,@checklists.bonfire_category , :id, :checklist_name do |checklist| %>
             <%# @camp.checklists.cook_category.each do |checklist| %>
              <tbody>
                <tr>
                  <td><%= checklist.check_box %></td>
                  <td><%= checklist.object.checklist_name %></td>
                  <td><%= checklist.object.comment %></td>
                </tr>
              </tbody>
            <% end %>
          </table>
        </div>

        <div
          class="tab-pane fade"
          id="others"
          role="tabpanel"
          aria-labelledby="others-tab"
        >
          <table class="table">
            <%= f.collection_check_boxes :others_categories ,@checklists.others_category , :id, :checklist_name do |checklist| %>
             <%# @camp.checklists.cook_category.each do |checklist| %>
              <tbody>
                <tr>
                  <td><%= checklist.check_box %></td>
                  <td><%= checklist.object.checklist_name %></td>
                  <td><%= checklist.object.comment %></td>
                </tr>
              </tbody>
            <% end %>
          </table>
        </div>

      <% end %>
    </div>
  </div>

    <!--camp: @campを追加-->
    <%= render 'list', checklist: @checklist, camp: @camp %>

  </div>
</div>